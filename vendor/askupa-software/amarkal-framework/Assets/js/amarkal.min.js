/**
 * Package: amarkal
 * Version: 0.1.0
 * Date: 2015-01-13
 */
jQuery(document).ready(function(a){function b(){}b.Notifier={},b.Notifier.top=32,b.Notifier.notifications=[],b.Notifier.notify=function(c,d){var e=document.createElement("div"),f=document.createElement("p"),g=document.createElement("div");e.setAttribute("class","ao-notification notifier-"+d),g.setAttribute("class","ao-notification-button fa fa-times"),e.appendChild(f),e.appendChild(g),f.innerHTML=c,a(g).click(function(){b.Notifier.removeNotification(e)}),a(e).css({top:b.Notifier.top+"px"}),a(".amarkal-options").append(e),b.Notifier.top+=a(e).outerHeight()+10,b.Notifier.notifications.push(e)},b.Notifier.success=function(a){b.Notifier.notify(a,"success")},b.Notifier.error=function(a){b.Notifier.notify(a,"error")},b.Notifier.removeNotification=function(c){var d=b.Notifier.notifications.indexOf(c),e=a(c).outerHeight()+10;for(b.Notifier.top-=e,c.parentNode.removeChild(c),b.Notifier.notifications.splice(d,1);d<b.Notifier.notifications.length;d++)a(b.Notifier.notifications[d]).animate({top:"-="+e})},b.Options={},b.Options.formID="ao-form",b.Options.init=function(){b.Options.Sections.init(),a(".form-control-button").click(function(c){c.preventDefault(),c.stopPropagation(),b.Options[a(this).attr("data-action")]()});for(var c=b.Options.State.get("notifications"),d=0;d<c.length&&c;d++)b.Notifier.notify(c[d].message,c[d].type);a(".amarkal-options .append-control-menu").click(function(b){b.preventDefault(),b.stopPropagation(),a(this).parent().hasClass("active")?a(".form-control-button").removeClass("active"):(a(".form-control-button").removeClass("active"),a(this).parent().toggleClass("active"))}),a('[data-type="help"]').tooltip({delay:{show:0,hide:250}})},b.Options.save=function(){b.Options.State.set("action","save"),b.Options.submit()},b.Options.reset=function(){b.Options.State.set("action","reset-all"),b.Options.submit()},b.Options.resetSection=function(){b.Options.State.set("action","reset-section"),b.Options.submit()},b.Options.export=function(){b.Notifier.success("This feature is not yet implemented.")},b.Options.exportAs=function(){b.Notifier.success("This feature is not yet implemented.")},b.Options.import=function(){b.Notifier.success("This feature is not yet implemented.")},b.Options.submit=function(){a("#"+b.Options.formID).submit()},b.Options.Section=function(b){this.id=b,this.button=a('[data-section="'+this.id+'"]'),this.triangleEl=a('<i class="fa fa-exclamation-triangle"></i>'),this.circleEl=a('<span class="number"></span>'),this.noticePanel=a("#"+b).find(".section-notifications"),this.notices=[],this.updated=[],this.subsections=[],this.init()},b.Options.Section.prototype.init=function(){this.button.append(this.triangleEl,this.circleEl),this.circleEl.hide(),this.triangleEl.hide();var b=this;a("#"+this.id).find(".field-wrapper").change(function(){a(this).addClass("field-updated"),b.updated.push(a(this).attr("for")),a.unique(b.updated),b.circleEl.text(b.updated.length),b.circleEl.show()}),a("#"+this.id+" .sub-menu a").each(function(){a(this).click(function(c){c.preventDefault(),b.hideAllSubsections(),b.showSubsection(a(this).attr("href"))}),b.subsections.push(a(this).attr("href"))}),this.hideAllSubsections(),this.showSubsection(this.subsections[0])},b.Options.Section.prototype.show=function(){b.Options.State.set("active_section",this.id),this.button.addClass("active"),a("#"+this.id).show()},b.Options.Section.prototype.hide=function(){this.button.removeClass("active"),a("#"+this.id).hide()},b.Options.Section.prototype.showSubsection=function(b){a('[href="'+b+'"]').addClass("active"),a('[data-subsection="'+b+'"]').show()},b.Options.Section.prototype.hideAllSubsections=function(){a("#"+this.id+" .sub-menu a").each(function(){a(this).removeClass("active"),a('[data-subsection="'+a(this).attr("href")+'"]').hide()})},b.Options.Section.prototype.addNotification=function(a){this.notices.push(a),this.triangleEl.show();for(var b="",c=0;c<this.notices.length;c++)b+="<p>"+this.notices[c]+"</p>";this.noticePanel.html(b)},b.Options.Section.prototype.clearNotifications=function(){this.triangleEl.hide(),this.notices=[]},b.Options.Sections={},b.Options.Sections.sectionList=[],b.Options.Sections.init=function(){a(".amarkal-options .section").each(function(){var c=new b.Options.Section(a(this).attr("id"));b.Options.Sections.sectionList.push(c),c.hide(),c.id===b.Options.State.get("active_section")&&c.show()}),a("[data-section]").click(function(c){c.preventDefault(),b.Options.Sections.hideAll(),b.Options.Sections.getByID(a(this).attr("data-section")).show(),a("#"+b.Options.formID).attr("action",a(this).attr("href"))})},b.Options.Sections.getByID=function(a){for(var c=0;c<b.Options.Sections.sectionList.length;c++){var d=b.Options.Sections.sectionList[c];if(d.id===a)return d}},b.Options.Sections.hideAll=function(){for(var a=0;a<b.Options.Sections.sectionList.length;a++)b.Options.Sections.sectionList[a].hide()},b.Options.State={},b.Options.State.inputID="options-state",b.Options.State.data=a.parseJSON(a("#"+b.Options.State.inputID).val()),b.Options.State.set=function(a,c){b.Options.State.data[a]=c,b.Options.State.update()},b.Options.State.get=function(a){var c=b.Options.State.data;return null!==c&&c.hasOwnProperty(a)?c[a]:!1},b.Options.State.update=function(){a("#options-state").val(JSON.stringify(b.Options.State.data))},jQuery(document).ready(function(a){a(".ao-field-dropdown select").select2({width:"resolve"}).change(function(){a(this).parents(".field-wrapper").trigger("change")})}),jQuery(document).ready(function(a){a(".ao-field-slider").each(function(){var b=parseInt(a(this).attr("data-max")),c=parseInt(a(this).attr("data-min")),d=parseInt(a(this).attr("data-step")),e=a(this).attr("data-type"),f=a(this).attr("disabled");if("range"===e){var g=a(this).find("input");a(this).children(".slider").slider({min:c,max:b,step:d,range:!0,disabled:f,values:[parseInt(g[0].value),parseInt(g[1].value)],slide:function(b,c){g[0].value=c.values[0],g[1].value=c.values[1],a(this).parents(".field-wrapper").trigger("change")}})}else{var h=a(this).find("input");a(this).children(".slider").slider({min:c,max:b,step:d,range:e,disabled:f,value:parseInt(h.val()),slide:function(b,c){h.val(c.value),a(this).parents(".field-wrapper").trigger("change")}})}a(this).find(".ui-slider-handle").html('<i class="fa fa-navicon fa-rotate-90"></i>')})}),jQuery(document).ready(function(a){a(".ao-field-spinner").each(function(){var b=a(this).find("input"),c=b.attr("data-maxvalue"),d=b.attr("data-minvalue"),e=b.attr("data-step"),f=b.attr("disabled");b.spinner({min:d,max:c,step:e,disabled:f}),a(this).find(".ui-spinner-down").detach().insertBefore(b),a(this).find(".ui-spinner-up").html('<i class="fa fa-chevron-right"></i>'),a(this).find(".ui-spinner-down").html('<i class="fa fa-chevron-left"></i>'),a(this).find(".ui-spinner-button").click(function(){a(this).parents(".field-wrapper").trigger("change")})})}),jQuery(document).ready(function(a){a(".ao-field-switcher").children("label").click(function(){var b=[],c=a(this).parent(),d=c.children("input"),e=d.attr("disabled");e||(c.hasClass("singlevalue")&&c.find("label").removeClass("active"),a(this).toggleClass("active")),c.find(".active").each(function(){b.push(a(this).attr("data-value"))}),d.val(b),a(this).parents(".field-wrapper").trigger("change")})}),jQuery(document).ready(function(a){a(".ao-field-input input").change(function(){a(this).parents(".field-wrapper").trigger("change")})}),jQuery(document).ready(function(a){a(".ao-field-textarea textarea").resizable({minHeight:150,minWidth:250}),a(".ui-resizable-s").html('<i class="fa fa-bars"></i>'),a(".ui-resizable-e").html('<i class="fa fa-bars fa-rotate-90"></i>'),a(".ao-field-textarea textarea").change(function(){a(this).parents(".field-wrapper").trigger("change")})}),b.Widget={},a(document).trigger("widget_init"),a(document).ajaxComplete(function(b,c,d){var e,f,g,h={},i=d.data.split("&");for(e in i)f=i[e].split("="),h[decodeURIComponent(f[0])]=decodeURIComponent(f[1]);h.action&&"save-widget"===h.action&&(g=a('input.widget-id[value="'+h["widget-id"]+'"]').parents(".widget"),c.responseText?a(document).trigger("widget_init",g):wpWidgets.save(g,0,1,0))}),a(document).bind("widget_init",function(){a('[data-type="error"]').tooltip({template:'<div class="tooltip tooltip-error"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}),a('[data-type="help"]').tooltip({delay:{show:0,hide:250}})}),function(a){a(document).bind("widget_init",function(){a(".amarkal-widget.colorpicker input").wpColorPicker(),a(".amarkal-widget.colorpicker.disabled").find(".wp-color-result").unbind("click")})}(jQuery),function(a){a(document).bind("widget_init",function(){a(".amarkal-widget.datepicker input").datepicker(),a(".datepicker-button").click(function(){var b=a(this).parent().find("input");b.datepicker(b.datepicker("widget").is(":visible")?"hide":"show")}),a(".amarkal-widget.datepicker.disabled input").datepicker("disable")})}(jQuery),function(a){a(document).bind("widget_init",function(){a(".amarkal-widget.select select").select2({width:"resolve"})})}(jQuery),b.Options.init()});